name: Brutal Backup

on:
  push:
    branches: [ test2 ]
  workflow_dispatch:

jobs:
  brutal-sync:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
      with:
        ref: test2
    
    - name: Destroy and recreate Backup
      run: |
        rm -rf Backup
        mkdir Backup
        [ -d "Source" ] && cp -r Source/* Backup/ 2>/dev/null || true
        echo "Brutal sync done: $(date)" > Backup/sync-force.txt
    
    - name: Push brutally
      run: |
        git config user.name "GitHub Brutal Bot"
        git config user.email "actions@users.noreply.github.com"
        git add .
        git commit -m "ðŸ’¥ BRUTAL SYNC: $(date)" || exit 0
        git push origin test2 --force
